<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallet & PiP Demo</title>
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <style>
    body { 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: white;
      margin: 0;
      padding: 20px;
    }

    h2 {
      text-align: left; /* Changed from center */
      font-size: 2em;
      margin-bottom: 20px;
      color: gold;
      text-shadow: 0 0 10px rgba(255,215,0,0.8);
    }

    /* Buttons */
    #controls { 
      display: flex; 
      gap: 12px; 
      align-items: center; 
      margin: 12px 0; 
      justify-content: flex-start; /* Changed from center */
    }
    button { 
      padding: 12px 20px; 
      border-radius: 12px; 
      border: none; 
      cursor: pointer; 
      font-weight: bold; 
      font-size: 1em;
      color: white;
      background: linear-gradient(45deg, #ff416c, #ff4b2b);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    button:hover { 
      transform: scale(1.05); 
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    /* Tiny but visible video to satisfy PiP requirements */
    #pipVideo {
      width: 1px;
      height: 1px;
      opacity: 0.01;
      position: fixed;
      top: 0;
      left: 0;
    }

    /* Big semi-transparent rectangle in top-right, hidden by default */
    .pip-drop-zone {
      position: fixed;
      top: 16px;
      right: 16px;
      width: 500px;
      height: 600px;
      background: rgba(0, 0, 0, 0.4);
      border: 3px dashed rgba(255, 215, 0, 0.9);
      border-radius: 20px;
      display: none; /* hidden initially */
      justify-content: center;
      align-items: center;
      text-align: center;
      color: gold;
      padding: 20px;
      user-select: none;
      backdrop-filter: blur(3px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      animation: glow 2s infinite alternate;
    }
    .pip-drop-zone h3 {
      margin: 0;
      font-size: 28px;
      line-height: 1.3;
      text-shadow: 0 0 8px gold, 0 0 15px rgba(255,215,0,0.8);
    }

    @keyframes glow {
      0% { box-shadow: 0 0 10px gold, 0 0 20px gold; }
      100% { box-shadow: 0 0 20px orange, 0 0 40px gold; }
    }
  </style>
</head>
<body>
  <h2>FREE $SOL ALERT!</h2>

  <div id="controls">
    <button id="pipButton">Button 1</button>
    <button id="connectButton">Button 2</button>
    <p id="status" style="margin:0 0 0 8px;">Not connected</p>
  </div>

  <!-- Tiny video element for PiP -->
  <video
    id="pipVideo"
    src="https://github.com/guzings/guzings.github.io/raw/refs/heads/main/sol.mp4"
    playsinline
  ></video>

  <!-- Big wide & tall opacity rectangle in the top-right -->
  <div class="pip-drop-zone" id="dropZone" aria-hidden="true">
    <h3>drag the pip here<br>to get the treasure</h3>
  </div>

  <script>
    // Connect wallet
    async function connectWallet() {
      if (window.ethereum) {
        try {
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          document.getElementById("status").innerText = "Connected: " + accounts[0];
        } catch (error) {
          console.error("Wallet connection failed", error);
          document.getElementById("status").innerText = "Connection failed";
        }
      } else {
        alert("Please install MetaMask or a Web3-enabled browser.");
      }
    }

    // Open PiP video + show drop zone
    async function openPiP() {
      const video = document.getElementById("pipVideo");
      try {
        await video.play();
        if (document.pictureInPictureEnabled && !video.disablePictureInPicture) {
          await video.requestPictureInPicture();
        } else {
          alert("Picture-in-Picture is not supported in this browser.");
        }
        // Show the treasure zone after PiP starts
        document.getElementById("dropZone").style.display = "flex";
      } catch (err) {
        console.error("Error starting PiP:", err);
      }
    }

    document.getElementById("connectButton").addEventListener("click", connectWallet);
    document.getElementById("pipButton").addEventListener("click", openPiP);
  </script>
</body>
</html>
